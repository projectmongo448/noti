!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("knockout"),require("jquery"),require("@aspnet/signalr")):"function"==typeof define&&define.amd?define(["knockout","jquery","@aspnet/signalr"],e):"object"==typeof exports?exports.dotnetify=e(require("knockout"),require("jquery"),require("@aspnet/signalr")):t.dotnetify=e(t.ko,t.jQuery,t.signalR)}(window,function(t,e,n){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=23)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fetch=e.createEventEmitter=void 0;var r=function(){function t(){}return t.prototype.trim=function(t){if("string"!=typeof t)return"";for(;t.indexOf("/",t.length-1)>=0;)t=t.substr(0,t.length-1);for(;0==t.indexOf("/");)t=t.substr(1,t.length-1);return t},t.prototype.equal=function(t,e){return null!=t&&null!=e&&t.toLowerCase()==e.toLowerCase()},t.prototype.startsWith=function(t,e){return t.toLowerCase().slice(0,e.length)==e.toLowerCase()},t.prototype.endsWith=function(t,e){return""==e||t.toLowerCase().slice(-e.length)==e.toLowerCase()},t.prototype.dispatchEvent=function(t){if("function"==typeof Event)dispatchEvent(new Event(t));else{var e=document.createEvent("CustomEvent");e.initEvent(t,!0,!0),dispatchEvent(e)}},t.prototype.grep=function(t,e){return Array.isArray(t)?t.filter(e):[]},t}();e.createEventEmitter=function(){var t=[];return{emit:function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=!1;return t.forEach(function(t){r=t.apply(void 0,e)||r}),r},subscribe:function(e){return!t.includes(e)&&t.push(e),function(){return t=t.filter(function(t){return t!==e})}}}},e.fetch=function(t,e,n,r){return new Promise(function(o,i){var u=new XMLHttpRequest;u.open(t,e,!0),"function"==typeof r&&r(u),u.onload=function(){if(u.status>=200&&u.status<400){var t=u.responseText;o(t)}else i(u)},u.onerror=function(){i(u)},u.send(n)})},e.default=new r},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";(function(t,r){var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=i||t||{},u=n(20),a=u.extend(function(t){return t===i||t.document?{0:t,on:function(t,e){i.addEventListener(t,e)},bind:function(t,e){i.addEventListener(t,e,!1)},unbind:function(t,e){i.removeEventListener(t,e,!1)}}:("string"!=typeof t&&(t.events=t.events||{}),{0:t,bind:function(e,n){var r=t.events[e]||[];r.push(n),t.events[e]=r},unbind:function(e,n){var r=t.events[e]||[];if(n){var o=r.indexOf(n);-1!==o&&r.splice(o,1)}else r=[];t.events[e]=r},triggerHandler:function(e,n){var r=t.events[e]||[],o=[{type:e}];Array.isArray(n)?n.forEach(function(t){o.push(t)}):n&&o.push(n),r.forEach(function(t){t.apply(this,o)})},load:function(e,n,r){var o=new i.XMLHttpRequest;return o.open("GET",e,!0),o.onload=function(){if(o.status>=200&&o.status<400){var e=o.responseText;document.querySelector(t).innerHTML=e,r.call(document.querySelector(t))}},o.send(),{abort:function(t){return o.abort(t)}}}})},u,{support:{cors:!0},trim:function(t){return"string"==typeof t?t.trim():t},inArray:function(t,e){return-1!==t.indexOf(e)},makeArray:function(t){return[].slice.call(t,0)},merge:function(t,e){return Array.prototype.push.apply(t,e),t},isEmptyObject:function(t){return!t||0===Object.keys(t).length},ajax:function(t){var e=new i.XMLHttpRequest;return e.onreadystatechange=function(){if(4===e.readyState)if(200!==e.status||e._hasError)t.error&&t.error(e);else try{t.success&&t.success(JSON.parse(e.responseText))}catch(n){t.success&&t.success(e.responseText)}},e.open(t.type,t.url),e.setRequestHeader("content-type",t.contentType),e.send(t.data.data&&"data="+t.data.data),{abort:function(t){return e.abort(t)}}},getScript:function(t,e){var n=!1,r=u.Deferred(),o=document.getElementsByTagName("head")[0],i=document.createElement("script");return i.src=t,i.onload=i.onreadystatechange=function(){n||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(n=!0,i.onload=i.onreadystatechange=null,o.removeChild(i),"function"==typeof e&&e(),r.resolve())},o.appendChild(i),r}});void 0!==i&&(i.jQuery=i.jQuery||a),"object"===o(e)&&"object"===o(r)&&(r.exports=a)}).call(this,n(1),n(4)(t))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=a(n(22)),i=a(n(3));n(13);var u=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2));function a(t){return t&&t.__esModule?t:{default:t}}u.mapping=n(12);var s=s||t||{},c=s.dotnetify||o.default;c.ko={version:"2.0.0",controller:c,_responseSubs:null,_connectedSubs:null,_responseVM:function(t,e){var n=t,r=null;n.indexOf("$")>=0&&(n=(o=t.split("$"))[0],r=o[1]);var o,u="[data-vm='"+n+"']";if((o=n.split(".")).length>1){u="";var a=0;for(a=0;a<o.length-1;a++)u+="[data-master-vm='"+o[a]+"'] ";u+="[data-vm='"+o[a]+"']"}null!=r&&(u+="[data-vm-id='"+r+"']");var s=(0,i.default)(u);return s.length>0&&(c.checkServerSideException(t,e),s.data("ko-dotnetify").UpdateVM(e),!0)},init:function(){var t=c.ko,e=c.selectHub().hub,n=function(){i.default.each((0,i.default)("[data-vm]"),function(){(0,i.default)(this).dotnetify()})};t._responseSubs||(t._responseSubs=e.responseEvent.subscribe(t._responseVM)),t._connectedSubs||(t._connectedSubs=e.connectedEvent.subscribe(function(){n()})),setTimeout(function(){c.offline&&!e.isConnected&&(n(),c.isOffline=!0,(0,i.default)(document).trigger("offline",c.isOffline))},c.offlineTimeout),c.ssr?console.error("ERROR: dotNetify-ko does not support SSR."):(c.startHub(e),e.stateChanged(function(t){c.debug&&console.log("SignalR: "+t);var e="connected"!=t;c.isOffline!=e&&(c.isOffline=e,(0,i.default)(document).trigger("offline",c.isOffline))}),c.offline&&n())},destroy:function(t){(t?(0,i.default)(t).find("[data-vm]").addBack(t):(0,i.default)("[data-vm]")).toArray().forEach(function(t){var e=c.ko.widget(t);e&&e.destroy()})},getViewModels:function(){c.ko;return(0,i.default)("[data-vm]").toArray().map(function(t){var e=c.ko.widget(t);return e?e.VM:null}).filter(function(t){return t})},widget:function(t){return(0,i.default)(t).data("ko-dotnetify")},plugins:{}},(0,i.default)(function(){c.ko.init()}),i.default.widget("ko.dotnetify",{_create:function(){var t=this;t.VMType=t.element.attr("data-vm"),t.VMId=t.VMType;var e=t.element.attr("data-vm-id");null!=e&&(t.VMId+="$"+e),i.default.each(t.element.parents("[data-master-vm]"),function(){t.VMId=(0,i.default)(this).attr("data-master-vm")+"."+t.VMId}),c.offline&&t._ListenToOfflineEvent(),null!=t.VMId?c.hub.isConnected?t._RequestVM():c.offline&&t._GetOfflineVM():console.error("ERROR: dotnetify - failed to find 'data-vm' attribute in the element where .dotnetify() was applied.")},_destroy:function(){try{var t=this;"function"==typeof t.OfflineFn&&(0,i.default)(document).off("offline",t.OfflineFn),i.default.each(c.plugins,function(e,n){"function"==typeof n.$destroy&&n.$destroy.apply(t.VM)}),null!=t.VM&&t.VM.hasOwnProperty("$destroy")&&t.VM.$destroy()}catch(t){console.error(t.stack)}c.hub.disposeVM(t.VMId)},UpdateVM:function(t){var e=this;try{if(null==e.VM){e.VM=u.mapping.fromJS(JSON.parse(t)),e.VM.$vmId=e.VMId,e.VM.$element=e.element,e.VM.$dotnetify=c.ko,c.offline&&(e.VM.$vmOffline=u.observable(e.IsOffline)),this._AddBuiltInFunctions(),i.default.each(c.ko.plugins,function(t,n){"function"==typeof n.$init&&n.$init.apply(e.VM)}),"function"==typeof e.VM.$init&&e.VM.$init();try{u.applyBindings(e.VM,e.element[0])}catch(t){console.error(t.stack)}e.VM.$serverUpdate=!0,e._OnComponentReady(function(){i.default.each(c.ko.plugins,function(t,n){"function"==typeof n.$ready&&n.$ready.apply(e.VM)}),e._SubscribeObservables(e.VM),"function"==typeof e.VM.$ready&&e.VM.$ready(),e.element.trigger("ready",{VMId:e.VMId,VM:e.VM})}),c.offline&&c.hub.isConnected&&"function"==typeof c.offlineCacheFn&&c.offlineCacheFn(e.VMId+e.element.attr("data-vm-arg"),t)}else{e.VM.$serverUpdate=!1;var n=JSON.parse(t);e._PreProcess(n);try{u.mapping.fromJS(n,e.VM)}catch(t){console.error(t.stack)}e.VM.$serverUpdate=!0,e._OnComponentReady(function(){e._SubscribeObservables(e.VM)})}}catch(t){console.error(t.stack)}c.debug&&(console.log("["+e.VMId+"] received> "),console.log(JSON.parse(t)),null!=c.debugFn&&c.debugFn(e.VMId,"received",JSON.parse(t)))},_AddBuiltInFunctions:function(){var t=this;t.VM.$preventBinding=function(e){t.VM.$serverUpdate=!1,e.apply(t.VM),t.VM.$serverUpdate=!0},t.VM.$addList=function(t,e){var n=Array.isArray(e)?e:u.mapping.fromJS(e),r=t().$vmKey;if(null!=r){var o=u.utils.arrayFirst(t(),function(t){return t[r]()==n[r]()});if(null!=o)return void t.replace(o,n)}t.push(n)},t.VM.$updateList=function(t,e){var n=u.mapping.fromJS(e),r=t().$vmKey;if(null!=r){if(!n.hasOwnProperty(r))return void console.error("ERROR: object requires property '"+r+"'");var o=u.utils.arrayFirst(t(),function(t){return t[r]()==n[r]()});if(null!=o)return void Object.keys(n).forEach(function(t){u.isObservable(n[t])&&o[t](n[t]())})}t.push(n)},t.VM.$removeList=function(e,n){t.VM.$preventBinding(function(){e.remove(n)})},t.VM.$on=function(t,e){t.subscribe(function(t){e(t)})},t.VM.$once=function(t,e){var n=t.subscribe(function(t){n.dispose(),e(t)})},t.VM.$loadView=function(t,e,n,o,u){"object"===(void 0===n?"undefined":r(n))&&null!=n?(u=o,o=n,n=null):"function"==typeof n?(u=n,n=null):"function"==typeof o&&(u=o,o=null),null!=e&&""!=e?(0,i.default)(t).load(e,null,function(){null==o||i.default.isEmptyObject(o)||(0,i.default)(this).attr("data-vm-arg",JSON.stringify(o)),"function"==typeof u&&u.apply(this),null!=n?i.default.getScript(n,function(){c.ko.init()}):c.ko.init()}):(0,i.default)(t).empty()},t.VM.$inject=function(e,n){u.isObservable(e)&&"push"in e?i.default.each(e(),function(e,r){t._Inject(r,n)}):t._Inject(e,n)};var e=s[t.VMType];if(null!=e)if("function"==typeof e){var n=new e(t.VM);Object.assign(n,e.prototype),t._Inject(t.VM,n)}else t._Inject(t.VM,e);i.default.each(c.ko.plugins,function(e,n){n.hasOwnProperty("$inject")&&n.$inject(t.VM)})},_GetOfflineVM:function(){if("function"==typeof c.offlineCacheFn){var t=c.offlineCacheFn(this.VMId+this.element.attr("data-vm-arg"));null==t&&(t=c.offlineCacheFn(this.VMId)),null!=t&&(c.debug&&console.warn("["+this.VMId+"] using offline data"),this.IsOffline=!0,this.UpdateVM(t))}},_ListenToOfflineEvent:function(){var t=this;t.IsOffline=!1,t.OfflineFn=function(e,n){null!=t.VM&&t.VM.hasOwnProperty("$vmOffline")&&t.VM.$vmOffline(n),t.IsOffline=n,n?null==t.VM&&t._GetOfflineVM():t._RequestVM(),(0,i.default)(document).one("offline",t.OfflineFn.bind(t))},(0,i.default)(document).one("offline",t.OfflineFn.bind(t))},_Inject:function(t,e){Object.keys(e).forEach(function(n){t.hasOwnProperty(n)||("function"==typeof e[n]?0==n.indexOf("_")?t[n]=u.pureComputed(e[n],t):t[n]=e[n]:0==n.indexOf("_")?(t[n]=u.observable(e[n]),t[n].$subscribe=!0):t[n]=e[n])})},_OnComponentReady:function(t){var e=this,n=0;!function r(){var o=!0,u=e.element.find("[params]");u.length>0&&(o=0==i.default.grep(u,function(t){return 0==t.childElementCount}).length),o||n++>3?t():setTimeout(r,250)}()},_OnValueChanged:function(t,e){var n={};if(n[t]=e instanceof Object?i.default.extend({},e):e,c.hub.isConnected)try{c.hub.updateVM(this.VMId,n),c.debug&&(console.log("["+this.VMId+"] sent> "),console.log(n),null!=c.debugFn&&c.debugFn(this.VMId,"sent",n))}catch(t){console.error(t)}},_PreProcess:function(t){var e=this;Object.keys(t).forEach(function(n){var r;if(null!=(r=/(.*)_add/.exec(n))){if(null==(o=e.VM[r[1]]))throw new Error("unable to resolve "+n);return e.VM.$addList(o,t[n]),void delete t[n]}if(null!=(r=/(.*)_update/.exec(n))){if(null==(o=e.VM[r[1]]))throw new Error("unable to resolve "+n);return e.VM.$updateList(o,t[n]),void delete t[n]}if(null!=(r=/(.*)_remove/.exec(n))){var o;if(null==(o=e.VM[r[1]]))throw new Error("unable to resolve "+n);var i=o().$vmKey;if(null==i)throw new Error("unable to resolve "+n+" due to missing vmItemKey attribute");return e.VM.$removeList(e.VM[r[1]],function(e){return e[i]()==t[n]}),void delete t[n]}})},_RequestVM:function(){var t=this.element.attr("data-vm-arg");if(t=null!=t?i.default.parseJSON(t.replace(/'/g,'"')):null,c.hub.isConnected)try{c.hub.requestVM(this.VMId,t)}catch(t){console.error(t)}},_SubscribeObservables:function(t,e){var n=this,o=this;if(null!=t)if(u.isObservable(t))"$subscribe"in t==!1&&(t.subscribe(function(t){!0===o.VM.$serverUpdate&&o._OnValueChanged(e,t)}),t.$subscribe=!0),this._SubscribeObservables(t(),e);else if("object"==(void 0===t?"undefined":r(t))){var i="$vmKey"in t?t.$vmKey:null;Object.keys(t).forEach(function(r){if("$"!=r.charAt(0)&&"_"!=r.charAt(0)&&r.charAt(0)!=r.charAt(0).toLowerCase()&&isNaN(r.charAt(0))){var o=null!=i?"$"+t[r][i]():r;n._SubscribeObservables(t[r],null==e?o:e+"."+o)}})}else t instanceof Array&&Object.keys(t).forEach(function(r){path="$"+r,n._SubscribeObservables(t[r],null==e?path:e+"."+path)})}}),u.bindingHandlers.vmItemKey={preprocess:function(t){return"'"!=t.charAt(0)?"'"+t+"'":t},update:function(t,e,n,r,o){var i=e(),a=n.get("foreach");!u.isObservable(a)&&a.hasOwnProperty("data")&&(a=a.data),u.isObservable(a)&&null!=a()&&null!=i&&(a().$vmKey=i)}},u.bindingHandlers.vmCommand={init:function(t,e,n,r,o){var i=o.$root,a=null,s=null,c=/return\s{(.*):(.*)}\s/.exec(e.toString());if(null!=c)a=c[1].trim(),s=c[2].trim();else{var l=/return\s(.*)\s/.exec(e.toString());null!=l&&(a=l[1].trim())}if(null==a)throw new Error("invalid vmCommand value at "+t.outerHTML);null!=s?"'"==s.charAt(0)?s=s.replace(/(^'|'$)/g,""):u.isObservable(r[s])?s=u.unwrap(r[s]):"$data"==s&&(s=r):s=!0;u.bindingHandlers.click.init(t,function(){return function(){var n=null!=i[a]?i[a]:e();u.isObservable(n)?(i.$preventBinding(function(){n(!0!==s&&null)}),n(s)):n.apply(i,[r,t,o.$parent])}},n,r,o)}},u.bindingHandlers.vmOnce={init:function(t,e,n,r,o){u.bindingHandlers.vmOn.init(t,e,n,r,o,!0)}},u.bindingHandlers.vmOn={init:function(t,e,n,r,o,i){var a=o.$root,s=null,c=null,l=e.toString(),f=/return\s{(.*):(.*)}\s/.exec(l);if(null!=f&&(s=f[1].trim(),c=f[2].trim()),null==c)throw new Error("invalid vmOn function at "+t.outerHTML);var d=function(){return null!=a[c]?a[c]:e()[s]};if(null!=s&&!u.isObservable(r[s]))throw new Error("invalid vmOn data: "+e());d().apply(a,[r,t,o.$parent]),null==i&&r[s].subscribe(function(e){d().apply(a,[r,t,o.$parent])})}},e.default=c}).call(this,n(1))},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,a=i.length;u<a;u++,o++)r[o]=i[u];return r};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=n(5),u=function(){function t(t,e){this.routes=[],this.vm=t,this.router=e,this.debug=t.$dotnetify.controller.debug,e.resetUrlOnReconnected(this.vm.$hub),t.$options&&t.$options.onRouteEnter&&(t.onRouteEnter=t.$options.onRouteEnter)}return Object.defineProperty(t.prototype,"hasRoutingState",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RoutingState",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"VMRoot",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"VMArg",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),t.prototype.dispatchActiveRoutingState=function(t){this.vm.$dispatch({"RoutingState.Active":t});var e=this.vm.State().RoutingState;e=Object.assign(e||{},{Active:t}),this.vm.State({RoutingState:e})},t.prototype.handleRoute=function(t){var e=this,n=null;if("object"==typeof t?(t.preventDefault(),n=t.currentTarget.pathname):"string"==typeof t&&(n=t),null==n||""==n)throw new Error("$handleRoute requires path argument or event with pathname.");setTimeout(function(){return e.router.pushState({},"",n)})},t.prototype.initRoot=function(){if(this.hasRoutingState&&null!==this.RoutingState&&null!==this.RoutingState.Root&&this._absRoot!=this.RoutingState.Root){var t=o.default.trim(this.VMRoot);""!=t&&(t="/"+t);var e=o.default.trim(this.RoutingState.Root);this._absRoot=""!=e?t+"/"+e:t,this.RoutingState.Root=this._absRoot}},t.prototype.initRouting=function(){var t=this,e=this.vm;if(this.hasRoutingState)if(null!==this.RoutingState){var n=this.RoutingState.Templates;if(null!=n&&0!=n.length){this.router._init||(this.router.init(),this.router._init=!0),this.initRoot(),n.forEach(function(e){var n=null!=e.UrlPattern?e.UrlPattern:e.Id;n=""!=n?n:"/";var r=t.toUrl(n);t.debug&&console.log("router> map "+r+" to template id="+e.Id),t.router.mapTo(r,function(r){t.router.urlPath="";var o=n;for(var i in r)o=o.replace(":"+i,r[i]);o=o.replace(/\(\/:([^)]+)\)/g,"").replace(/\(|\)/g,""),t.routeTo(o,e)})});var r=this.toUrl(this.RoutingState.Active);""==this.router.urlPath&&(this.router.urlPath=r),this.routeUrl()||this.raiseRoutedEvent(!0)}}else console.error("router> the RoutingState prop of '"+e.$vmId+"' was not initialized.");else this.router.urlPath&&this.raiseRoutedEvent(!0)},t.prototype.isActive=function(t){return!(null==t||!t.hasOwnProperty("Path"))&&o.default.equal(t.Path,this.RoutingState.Active)},t.prototype.loadHtmlView=function(t,e,n,r){var o=this.vm;this.unmountView(t),i(t).load(e,null,function(){if(null!=n){var t=n.split(",").map(function(t){return i.getScript(t)});i.when.apply(i,t).done(function(){return"function"==typeof r&&r.call(o)})}else"function"==typeof r&&r.call(o)})},t.prototype.loadHtmlElementView=function(t,e,n,r,o){var u=this,a=this.vm,s=function(){u.unmountView(t);for(var n=document.querySelector(t);n.firstChild;)n.removeChild(n.firstChild);n.appendChild(e),"function"==typeof o&&o.call(a)};if(null==n)s();else{var c=n.split(",").map(function(t){return i.getScript(t)});i.when.apply(i,c).done(s)}},t.prototype.loadView=function(t,e,n,r,o){throw new Error("Not implemented")},t.prototype.manualRouteTo=function(t,e,n,r){this.vm;var o={Id:"manual",UrlPattern:null,Target:e,ViewUrl:n,JSModuleUrl:r};this.routeTo(t,o,!0)},t.prototype.onRouteEnter=function(t,e){return!0},t.prototype.raiseRoutedEvent=function(t){var e=this;if(this.RoutingState&&this.RoutingState.Templates){if(t){var n=this.RoutingState.Templates.find(function(t){return"*"===t.UrlPattern});n?this.routeTo(this.router.urlPath,n):this.router.notFound404Url&&setTimeout(function(){return window.location.href=e.router.notFound404Url})}this.debug&&console.log("router> routed"+(t?" (404)":""))}this.router.routedEvent.emit()},t.prototype.route=function(t,e){if(null!=t){if(!t.hasOwnProperty("Path")&&!t.hasOwnProperty("TemplateId"))throw new Error("Not a valid route");this.initRoot();var n=t.Path,r=null;if(this.hasRoutingState&&null!=this.RoutingState.Templates&&null!=t.TemplateId){var o=this.RoutingState.Templates.filter(function(e){return e.Id==t.TemplateId});if(o.length>0)r=o[0],"string"==typeof e&&(r.Target=e),null==n&&(n=null!=r.UrlPattern?r.UrlPattern:r.Id,t.Path=n);else if(null==t.RedirectRoot)throw new Error("vmRoute cannot find route template "+t.TemplateId)}if(null!=t.RedirectRoot){var i=t.RedirectRoot;"/"==i.charAt(0)&&(i=i.substr(0,i.length-1));var u=t.RedirectRoot.split("/"),a="",s=this.VMRoot;if(null!=s)for(var c=s.split("/"),l=0;l<c.length&&(""==c[l]||c[l]!=u[0]);l++)a+=c[l]+"/";return a=(a+=i+"/"+n).replace(/\/\/+/g,"/"),this.routes.some(function(t){return t.Path===n})||this.routes.push({TemplateId:null,Path:n,Url:a}),a}if(null==r)throw new Error("vmRoute cannot find any route template");t.$template=r,this.pathToRoute=this.pathToRoute||{},this.pathToRoute[n]=t;var f=this.toUrl(n);return f=f.length>0?f:"/",this.routes.some(function(t){return t.Path===n})||this.routes.push({TemplateId:null,Path:n,Url:f}),f}},t.prototype.routeTo=function(t,e,n,i,u){var a=this,s=this.vm,c=s.$dotnetify.getViewModels();this.debug&&console.log("router> route '"+t+"' to template id="+e.Id);for(var l=this.toUrl(t),f=0;f<c.length;f++){var d=c[f].$router.VMArg;if(null!=d&&"string"==typeof d["RoutingState.Origin"]&&o.default.equal(d["RoutingState.Origin"],l))return}var p=function(){if(null!=e.Target)return null==document.getElementById(e.Target)?!0===u?void(a.debug&&console.log("router> target '"+e.Target+"' not found in DOM")):(a.debug&&console.log("router> target '"+e.Target+"' not found in DOM, use redirect instead"),a.router.redirect(a.toUrl(t),r(c,s.$dotnetify.controller.getViewModels()))):void a.loadView("#"+e.Target,e.ViewUrl,e.JSModuleUrl,{"RoutingState.Origin":t},function(){a.dispatchActiveRoutingState(t),1!=n&&s.hasOwnProperty("onRouteExit")&&s.onRouteExit(t,e),"function"==typeof i&&i.call(s)});console.error("router> the Target for template '"+e.Id+"' was not set.  Use vm.onRouteEnter() to set the target.")};if(1!=n&&s.hasOwnProperty("onRouteEnter")){if(!1===this.onRouteEnter(t,e))return;var h=s.onRouteEnter(t,e);if(!1===h)return;if(h&&"function"==typeof h.then)return void h.then(function(t){return!1!==t&&p()})}p()},t.prototype.routeToRoute=function(t){var e=this,n=this.vm.$route(t);if(null==n||""==n)throw new Error("The route passed to $routeTo is invalid.");setTimeout(function(){return e.router.pushState({},"",n)})},t.prototype.routeUrl=function(t){var e=this;if(!this.hasRoutingState)return!1;var n=!!t,r=this.RoutingState.Root;if(null==r)return!1;var i=n?t:this.router.urlPath;if(this.debug&&console.log("router> routing "+i),o.default.equal(i,r)||o.default.equal(i,r+"/")||"/"===i)return(u=o.default.grep(this.RoutingState.Templates,function(t){return""===t.UrlPattern})).length>0&&(this.routeTo("",u[0],null,null,n),this.router.urlPath="",this.raiseRoutedEvent(),!0);if(r+="/",o.default.startsWith(i,r)){var u,a=null;if((u=o.default.grep(this.routes,function(t){return o.default.startsWith(i+"/",t.Url+"/")})).length>0)for(var s=0;s<u.length;s++)(null==a||a.Url.length<u[s].Url.length)&&(a=u[s]);if(null!=a){var c=a.Path,l=this.hasOwnProperty("pathToRoute")&&this.pathToRoute.hasOwnProperty(c)?this.pathToRoute[c].$template:null;if(null!=l)return o.default.equal(this.router.urlPath,this.toUrl(c))&&(this.router.urlPath=""),o.default.equal(this.RoutingState.Active,c)?this.raiseRoutedEvent():this.routeTo(c,l,!1,function(){return e.raiseRoutedEvent()},n),!0}else if(this.router.match(i))return this.router.urlPath="",this.raiseRoutedEvent(),!0}return!1},t.prototype.toUrl=function(t){var e=o.default.trim(t);return"("!=e.charAt(0)&&""!=e&&(e="/"+e),this.hasRoutingState?this.RoutingState.Root+e:t},t.prototype.unmountView=function(t){throw new Error("Not implemented")},t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=a(n(7)),i=a(n(3)),u=a(n(0));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=function(){function t(e){s(this,t),this.template=e}return r(t,[{key:"Id",get:function(){return this.template.Id()}},{key:"Root",get:function(){return this.template.Root()}},{key:"UrlPattern",get:function(){return this.template.UrlPattern()}},{key:"ViewUrl",get:function(){return this.template.ViewUrl()},set:function(t){this.template.ViewUrl(t)}},{key:"JSModuleUrl",get:function(){return this.template.JSModuleUrl()},set:function(t){this.template.JSModuleUrl(t)}},{key:"Target",get:function(){return this.template.Target()},set:function(t){this.template.Target(t)}}]),t}(),l=function(){function t(e){s(this,t),this.routingState=e}return r(t,[{key:"Root",get:function(){return this.routingState.Root()},set:function(t){this.routingState.Root(t)}},{key:"Templates",get:function(){var t=this.routingState&&"function"==typeof this.routingState.Templates?this.routingState.Templates():null;return t?t.map(function(t){return new c(t)}):null}},{key:"Active",get:function(){return this.routingState.Active()},set:function(t){this.routingState.Active(t)}},{key:"Origin",get:function(){return this.routingState.Origin()},set:function(t){this.routingState.Origin(t)}}]),t}(),f=function(t){function e(t,n){return s(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),r(e,[{key:"hasRoutingState",get:function(){return this.vm.hasOwnProperty("RoutingState")}},{key:"RoutingState",get:function(){return new l(this.vm.RoutingState)}},{key:"VMRoot",get:function(){return this.vm.$element.attr("data-vm-root")}},{key:"VMArg",get:function(){return this.vm.$element.attr("data-vm-arg")}}]),r(e,[{key:"dispatchActiveRoutingState",value:function(t){this.RoutingState.Active=t}},{key:"onRouteEnter",value:function(t,e){return e.ViewUrl||(e.ViewUrl=e.Id+".html"),!0}},{key:"loadView",value:function(t,e,n,r,o){var a=this,s=this.vm;if(null!=e&&""!=e){e=this.router.overrideUrl(e),s.$loadView(t,e,n,r,function(){a.hasRoutingState&&a.RoutingState.Root&&(0,i.default)(t).find("[data-vm]").toArray().forEach(function(t){var e=(0,i.default)(t).attr("data-vm-root");if(e=null!=e?"/"+u.default.trim(s.RoutingState.Root())+"/"+u.default.trim(e):s.RoutingState.Root(),(0,i.default)(t).attr("data-vm-root",e),null!=r&&!i.default.isEmptyObject(r)){var n=(0,i.default)(t).attr("data-vm-arg");n=null!=n?i.default.extend(r,i.default.parseJSON(n.replace(/'/g,'"'))):r,(0,i.default)(t).attr("data-vm-arg",JSON.stringify(n))}});"function"==typeof o&&o.apply(a)})}else(0,i.default)(t).empty()}},{key:"manualRouteTo",value:function(t,e,n,r){var o={Target:function(){return e},ViewUrl:function(){return n},JSModuleUrl:function(){return r}};this.$router.routeTo(t,o,!0)}}]),e}();e.default=f},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var n=n||t||{},r={version:"0.8.5",map:function(t){return r.routes.defined.hasOwnProperty(t)?r.routes.defined[t]:new r.core.route(t)},root:function(t){r.routes.root=t},rescue:function(t){r.routes.rescue=t},history:{initial:{},pushState:function(t,e,o){r.history.supported?r.dispatch(o)&&history.pushState(t,e,o):r.history.fallback&&(n.location.hash="#"+o)},popState:function(t){var e=!r.history.initial.popped&&location.href==r.history.initial.URL;r.history.initial.popped=!0,e||r.dispatch("/"===document.location.pathname?"":document.location.pathname)},listen:function(t){if(r.history.supported=!(!n.history||!n.history.pushState),r.history.fallback=t,r.history.supported)r.history.initial.popped="state"in n.history,r.history.initial.URL=location.href,n.onpopstate=r.history.popState;else if(r.history.fallback){for(route in r.routes.defined)"#"!=route.charAt(0)&&(r.routes.defined["#"+route]=r.routes.defined[route],r.routes.defined["#"+route].path="#"+route);r.listen()}}},match:function(t,e){""===t&&(t="/");var n,o,i,u,a,s,c={},l=null;for(l in r.routes.defined)if(null!==l&&void 0!==l)for(n=(l=r.routes.defined[l]).partition(),u=0;u<n.length;u++){if(a=t,(o=n[u]).search(/:/)>0)for(i=0;i<o.split("/").length;i++)i<a.split("/").length&&":"===o.split("/")[i].charAt(0)&&(c[o.split("/")[i].replace(/:/,"")]=a.split("/")[i],(s=a.split("/"))[i]=o.split("/")[i],a=s.join("/"));if(o===a)return e&&(l.params=c),l}return null},dispatch:function(t){var e,n;if(r.routes.current!==t){if(r.routes.previous=r.routes.current,r.routes.current=t,n=r.match(t,!0),r.routes.previous&&null!==(e=r.match(r.routes.previous))&&null!==e.do_exit&&e.do_exit(),null!==n)return n.run(),!0;null!==r.routes.rescue&&r.routes.rescue()}},listen:function(){var t=function(){r.dispatch(location.hash)};""===location.hash&&null!==r.routes.root&&(location.hash=r.routes.root),"onhashchange"in n&&(!document.documentMode||document.documentMode>=8)?n.onhashchange=t:setInterval(t,50),""!==location.hash&&r.dispatch(location.hash)},core:{route:function(t){this.path=t,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},r.routes.defined[t]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};r.core.route.prototype={to:function(t){return this.action=t,this},enter:function(t){return t instanceof Array?this.do_enter=this.do_enter.concat(t):this.do_enter.push(t),this},exit:function(t){return this.do_exit=t,this},partition:function(){for(var t,e,n=[],r=[],o=/\(([^}]+?)\)/g;t=o.exec(this.path);)n.push(t[1]);for(r.push(this.path.split("(")[0]),e=0;e<n.length;e++)r.push(r[r.length-1]+n[e]);return r},run:function(){var t,e=!1;if(r.routes.defined[this.path].hasOwnProperty("do_enter")&&r.routes.defined[this.path].do_enter.length>0)for(t=0;t<r.routes.defined[this.path].do_enter.length;t++)if(!1===r.routes.defined[this.path].do_enter[t].apply(this,null)){e=!0;break}e||r.routes.defined[this.path].action()}},e.default=r}).call(this,n(1))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9),o=n(0),i=function(){function t(t){this.version="3.0.0",this.debug=!1,this.notFound404Url="/404.html",this._init=!1,this.routedEvent=o.createEventEmitter(),this.debug=t}return Object.defineProperty(t.prototype,"urlPath",{get:function(){return t._urlPath},set:function(e){t._urlPath=e},enumerable:!1,configurable:!0}),t.prototype.init=function(){if(void 0===r.default)throw new Error("Pathjs library is required for routing.");r.default.history.listen(!0),r.default.routes.rescue=function(){}},t.prototype.mapTo=function(t,e){t=t.length>0?t:"/",void 0!==r.default&&r.default.map(t).to(function(){e(this.params)})},t.prototype.match=function(t){if(void 0!==r.default){var e=r.default.match(t,!0);if(null!=e)return e.run(),!0}return!1},t.prototype.overrideUrl=function(t,e){return t},t.prototype.pushState=function(t,e,n){this.urlPath="",void 0!==r.default&&r.default.history.pushState(t,e,n)},t.prototype.redirect=function(t,e){this.urlPath=t;for(var n=0;n<e.length;n++){if(e[n].$router.routeUrl(t))return void(this.debug&&console.log("router> redirected"))}location.replace(t)},t.prototype.resetUrlOnReconnected=function(t){var e,n=this;!this._unsubReconnectedEvent&&t&&(this._unsubReconnectedEvent=null===(e=t.reconnectedEvent)||void 0===e?void 0:e.subscribe(function(){return n.urlPath=document.location.pathname}))},t.prototype.$ready=function(){this.$router.initRouting()},t.prototype.$update=function(t){t&&t.RoutingState&&this.$router.initRouting()},t._urlPath=document.location.pathname,t}();e.default=i},function(t,e,n){"use strict";var r=c(n(6)),o=c(n(10)),u=c(n(8)),a=c(n(3)),s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(2));function c(t){return t&&t.__esModule?t:{default:t}}r.default.ko.router=new o.default(r.default.debug),r.default.ko.router.$inject=function(t){var e=new u.default(t,r.default.ko.router);t.$router=e},s.bindingHandlers.vmRoute={update:function(t,e,n,o,u){var c=u.$root,l=s.unwrap(e());if(!l.hasOwnProperty("Path")||!l.hasOwnProperty("TemplateId"))throw new Error("invalid vmRoute data at "+t.outerHTML);c.$router.initRoot();var f=l.Path(),d=null;if(c.hasOwnProperty("RoutingState")&&"function"==typeof c.RoutingState.Templates&&null!=c.RoutingState.Templates()){var p=a.default.grep(c.RoutingState.Templates(),function(t){return t.Id()==l.TemplateId()});if(p.length>0)d=p[0],null==f&&(f=d.UrlPattern(),l.Path(f));else if(null==l.RedirectRoot())throw new Error("vmRoute cannot find route template '"+l.TemplateId()+"' at "+t.outerHTML)}if(null!=l.RedirectRoot()){var h=l.RedirectRoot();"/"==h.charAt(0)&&(h=h.substr(0,h.length-1));var v=l.RedirectRoot().split("/"),y="",g=c.$element.attr("data-vm-root");if(null!=g){var b=g.split("/");for(i=0;i<b.length&&(""==b[i]||b[i]!=v[0]);i++)y+=b[i]+"/"}return y+=h+"/"+f,void(0,a.default)(t).attr("href",y).attr("data-vm-route",f).click(function(t){t.preventDefault(),r.default.ko.router.pushState({},"",(0,a.default)(this).attr("href"))})}if(null==d)throw new Error("vmRoute cannot find any route template at "+t.outerHTML);l.$template=d,c.$router.pathToRoute=c.$router.pathToRoute||{},c.$router.pathToRoute[f]=l,(0,a.default)(t).attr("href",c.$router.toUrl(f)).attr("data-vm-route",f).click(function(t){t.preventDefault(),r.default.ko.router.pushState({},"",(0,a.default)(this).attr("href"))})}},r.default.ko.plugins.router=r.default.ko.router},function(t,e,n){"use strict";(function(t){var r,o,i,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(a){"object"===u(e)&&"object"===u(t)?a(n(2),e):(o=[n(2),e],void 0===(i="function"==typeof(r=a)?r.apply(e,o):r)||(t.exports=i))}(function(t,e){function n(t,r){var o,i;for(i in r)if(r.hasOwnProperty(i)&&r[i])if(o=e.getType(t[i]),i&&t[i]&&"array"!==o&&"string"!==o)n(t[i],r[i]);else if("array"===e.getType(t[i])&&"array"===e.getType(r[i])){o=t;for(var u=i,a=t[i],s=r[i],c={},l=a.length-1;0<=l;--l)c[a[l]]=a[l];for(l=s.length-1;0<=l;--l)c[s[l]]=s[l];for(s in a=[],s=void 0,c)a.push(c[s]);o[u]=a}else t[i]=r[i]}function r(t,e){var r={};return n(r,t),n(r,e),r}function o(t,e){for(var n=r({},t),o=w.length-1;0<=o;o--){var u=w[o];n[u]&&(n[""]instanceof Object||(n[""]={}),n[""][u]=n[u],delete n[u])}return e&&(n.ignore=i(e.ignore,n.ignore),n.include=i(e.include,n.include),n.copy=i(e.copy,n.copy),n.observe=i(e.observe,n.observe)),n.ignore=i(n.ignore,S.ignore),n.include=i(n.include,S.include),n.copy=i(n.copy,S.copy),n.observe=i(n.observe,S.observe),n.mappedProperties=n.mappedProperties||{},n.copiedProperties=n.copiedProperties||{},n}function i(n,r){return"array"!==e.getType(n)&&(n="undefined"===e.getType(n)?[]:[n]),"array"!==e.getType(r)&&(r="undefined"===e.getType(r)?[]:[r]),t.utils.arrayGetDistinctValues(n.concat(r))}function a(n,o,i,c,h,m,w){var O="array"===e.getType(t.utils.unwrapObservable(o));if(m=m||"",e.isMapped(n)){var S=t.utils.unwrapObservable(n)[g];i=r(S,i)}var R=w||h,E=function(){return i[c]&&i[c].create instanceof Function},M=function(e){var n=v,r=t.dependentObservable;return t.dependentObservable=function(e,r,o){o=o||{},e&&"object"==(void 0===e?"undefined":u(e))&&(o=e);var i=o.deferEvaluation,a=!1;if(o.deferEvaluation=!0,e=new b(e,r,o),!i){var s=e;i=t.dependentObservable;t.dependentObservable=b,e=t.isWriteableObservable(s),t.dependentObservable=i,e=b({read:function(){return a||(t.utils.arrayRemoveItem(n,s),a=!0),s.apply(s,arguments)},write:e&&function(t){return s(t)},deferEvaluation:!0}),n.push(e)}return e},t.dependentObservable.fn=b.fn,t.computed=t.dependentObservable,e=t.utils.unwrapObservable(h)instanceof Array?i[c].create({data:e||o,parent:R,skip:_}):i[c].create({data:e||o,parent:R}),t.dependentObservable=r,t.computed=t.dependentObservable,e},V=function(){return i[c]&&i[c].update instanceof Function},P=function(e,n){var r={data:n||o,parent:R,target:t.utils.unwrapObservable(e)};return t.isWriteableObservable(e)&&(r.observable=e),i[c].update(r)};if(w=y.get(o))return w;if(c=c||"",O){O=[];var j=!1,T=function(t){return t};i[c]&&i[c].key&&(T=i[c].key,j=!0),t.isObservable(n)||((n=t.observableArray([])).mappedRemove=function(t){var e="function"==typeof t?t:function(e){return e===T(t)};return n.remove(function(t){return e(T(t))})},n.mappedRemoveAll=function(e){var r=f(e,T);return n.remove(function(e){return-1!=t.utils.arrayIndexOf(r,T(e))})},n.mappedDestroy=function(t){var e="function"==typeof t?t:function(e){return e===T(t)};return n.destroy(function(t){return e(T(t))})},n.mappedDestroyAll=function(e){var r=f(e,T);return n.destroy(function(e){return-1!=t.utils.arrayIndexOf(r,T(e))})},n.mappedIndexOf=function(e){var r=f(n(),T);return e=T(e),t.utils.arrayIndexOf(r,e)},n.mappedCreate=function(e){if(-1!==n.mappedIndexOf(e))throw Error("There already is an object with the key that you specified.");var r=E()?M(e):e;return V()&&(e=P(r,e),t.isWriteableObservable(r)?r(e):r=e),n.push(r),r}),w=f(t.utils.unwrapObservable(n),T).sort(),S=f(o,T),j&&S.sort(),j=t.utils.compareArrays(w,S),w={};var k,C={},$=!0;S=0;for(k=(x=t.utils.unwrapObservable(o)).length;S<k;S++){if(void 0===(I=T(x[S]))||I instanceof Object){$=!1;break}C[I]=x[S]}var x=[],H=0;S=0;for(k=j.length;S<k;S++){var A,I=j[S],N=m+"["+S+"]";switch(I.status){case"added":var U=$?C[I.value]:l(t.utils.unwrapObservable(o),I.value,T);A=a(void 0,U,i,c,n,N,h),E()||(A=t.utils.unwrapObservable(A)),N=s(t.utils.unwrapObservable(o),U,w),A===_?H++:x[N-H]=A,w[N]=!0;break;case"retained":U=$?C[I.value]:l(t.utils.unwrapObservable(o),I.value,T),a(A=l(n,I.value,T),U,i,c,n,N,h),x[N=s(t.utils.unwrapObservable(o),U,w)]=A,w[N]=!0;break;case"deleted":A=l(n,I.value,T)}O.push({event:I.status,item:A})}n(x),i[c]&&i[c].arrayChanged&&t.utils.arrayForEach(O,function(t){i[c].arrayChanged(t.event,t.item)})}else if(p(o)){if(!(n=t.utils.unwrapObservable(n))){if(E())return j=M(),V()&&(j=P(j)),j;if(V())return P(j);n={}}if(V()&&(n=P(n)),y.save(o,n),V())return n;d(o,function(e){var r=m.length?m+"."+e:e;if(-1==t.utils.arrayIndexOf(i.ignore,r))if(-1!=t.utils.arrayIndexOf(i.copy,r))n[e]=o[e];else if("object"!=u(o[e])&&"array"!=typeof o[e]&&0<i.observe.length&&-1==t.utils.arrayIndexOf(i.observe,r))n[e]=o[e],i.copiedProperties[r]=!0;else{var s=y.get(o[e]),c=a(n[e],o[e],i,e,n,r,n);s=s||c;0<i.observe.length&&-1==t.utils.arrayIndexOf(i.observe,r)?(n[e]=s(),i.copiedProperties[r]=!0):(t.isWriteableObservable(n[e])?n[e](t.utils.unwrapObservable(s)):(s=void 0===n[e]?s:t.utils.unwrapObservable(s),n[e]=s),i.mappedProperties[r]=!0)}})}else switch(e.getType(o)){case"function":V()?t.isWriteableObservable(o)?(o(P(o)),n=o):n=P(o):n=o;break;default:if(t.isWriteableObservable(n))return A=V()?P(n):t.utils.unwrapObservable(o),n(A),A;E()||V(),n=E()?M():t.observable(t.utils.unwrapObservable(o)),V()&&n(P(n))}return n}function s(t,e,n){for(var r=0,o=t.length;r<o;r++)if(!0!==n[r]&&t[r]===e)return r;return null}function c(n,r){var o;return r&&(o=r(n)),"undefined"===e.getType(o)&&(o=n),t.utils.unwrapObservable(o)}function l(e,n,r){for(var o=0,i=(e=t.utils.unwrapObservable(e)).length;o<i;o++){var u=e[o];if(c(u,r)===n)return u}throw Error("When calling ko.update*, the key '"+n+"' was not found!")}function f(e,n){return t.utils.arrayMap(t.utils.unwrapObservable(e),function(t){return n?c(t,n):t})}function d(t,n){if("array"===e.getType(t))for(var r=0;r<t.length;r++)n(r);else for(r in t)n(r)}function p(t){var n=e.getType(t);return("object"===n||"array"===n)&&null!==t}function h(){var e={},n=function(n){var r;try{r=n}catch(t){r="$$$"}return void 0===(n=e[r])&&(n=new function(){var e=[],n=[];this.save=function(r,o){var i=t.utils.arrayIndexOf(e,r);0<=i?n[i]=o:(e.push(r),n.push(o))},this.get=function(r){return 0<=(r=t.utils.arrayIndexOf(e,r))?n[r]:void 0}},e[r]=n),n};this.save=function(t,e){n(t).save(t,e)},this.get=function(t){return n(t).get(t)}}var v,y,g="__ko_mapping__",b=t.dependentObservable,m=0,w=["create","update","key","arrayChanged"],_={},O={include:["_destroy"],ignore:[],copy:[],observe:[]},S=O;e.isMapped=function(e){return(e=t.utils.unwrapObservable(e))&&e[g]},e.fromJS=function(t){if(0==arguments.length)throw Error("When calling ko.fromJS, pass the object you want to convert.");try{var e,n;m++||(v=[],y=new h),2==arguments.length&&(arguments[1][g]?n=arguments[1]:e=arguments[1]),3==arguments.length&&(e=arguments[1],n=arguments[2]),n&&(e=r(e,n[g]));var i=a(n,t,e=o(e));if(n&&(i=n),!--m)for(;v.length;){var u=v.pop();u&&u()}return i[g]=r(i[g],e),i}catch(t){throw m=0,t}},e.fromJSON=function(n){var r=t.utils.parseJson(n);return arguments[0]=r,e.fromJS.apply(this,arguments)},e.updateFromJS=function(){throw Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!")},e.updateFromJSON=function(){throw Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!")},e.toJS=function(n,r){if(S||e.resetDefaultOptions(),0==arguments.length)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");if("array"!==e.getType(S.ignore))throw Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==e.getType(S.include))throw Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==e.getType(S.copy))throw Error("ko.mapping.defaultOptions().copy should be an array.");return r=o(r,n[g]),e.visitModel(n,function(e){return t.utils.unwrapObservable(e)},r)},e.toJSON=function(n,r){var o=e.toJS(n,r);return t.utils.stringifyJson(o)},e.defaultOptions=function(){if(!(0<arguments.length))return S;S=arguments[0]},e.resetDefaultOptions=function(){S={include:O.include.slice(0),ignore:O.ignore.slice(0),copy:O.copy.slice(0)}},e.getType=function(t){if(t&&"object"===(void 0===t?"undefined":u(t))){if(t.constructor===Date)return"date";if(t.constructor===Array)return"array"}return void 0===t?"undefined":u(t)},e.visitModel=function(n,r,i){(i=i||{}).visitedObjects=i.visitedObjects||new h;var u,a=t.utils.unwrapObservable(n);if(!p(a))return r(n,i.parentName);i=o(i,a[g]),r(n,i.parentName),u="array"===e.getType(a)?[]:{},i.visitedObjects.save(n,u);var s=i.parentName;return d(a,function(n){if(!i.ignore||-1==t.utils.arrayIndexOf(i.ignore,n)){var o=a[n],c=i,l=s||"";if("array"===e.getType(a)?s&&(l+="["+n+"]"):(s&&(l+="."),l+=n),c.parentName=l,-1!==t.utils.arrayIndexOf(i.copy,n)||-1!==t.utils.arrayIndexOf(i.include,n)||!a[g]||!a[g].mappedProperties||a[g].mappedProperties[n]||!a[g].copiedProperties||a[g].copiedProperties[n]||"array"===e.getType(a))switch(e.getType(t.utils.unwrapObservable(o))){case"object":case"array":case"undefined":c=i.visitedObjects.get(o),u[n]="undefined"!==e.getType(c)?c:e.visitModel(o,r,i);break;default:u[n]=r(o,i.parentName)}}}),u}})}).call(this,n(4)(t))},function(t,e,n){"use strict";var r,o,i;
/*! jQuery UI - v1.11.4 - 2015-10-01
 * http://jqueryui.com
 * Includes: widget.js
 * Copyright 2015 jQuery Foundation and other contributors; Licensed MIT */o=[n(3)],void 0===(i="function"==typeof(r=function(t){var e=0,n=Array.prototype.slice;t.cleanData=function(e){return function(n){var r,o,i;for(i=0;null!=(o=n[i]);i++)try{(r=t._data(o,"events"))&&r.remove&&t(o).triggerHandler("remove")}catch(t){}e(n)}}(t.cleanData),t.widget=function(e,n,r){var o,i,u,a,s={},c=e.split(".")[0];return e=e.split(".")[1],o=c+"-"+e,r||(r=n,n=t.Widget),t.expr[":"][o.toLowerCase()]=function(e){return!!t.data(e,o)},t[c]=t[c]||{},i=t[c][e],u=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new u(t,e)},t.extend(u,i,{version:r.version,_proto:t.extend({},r),_childConstructors:[]}),(a=new n).options=t.widget.extend({},a.options),t.each(r,function(e,r){return t.isFunction(r)?void(s[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},o=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,i=this._superApply;return this._super=t,this._superApply=o,e=r.apply(this,arguments),this._super=n,this._superApply=i,e}}()):void(s[e]=r)}),u.prototype=t.widget.extend(a,{widgetEventPrefix:i&&a.widgetEventPrefix||e},s,{constructor:u,namespace:c,widgetName:e,widgetFullName:o}),i?(t.each(i._childConstructors,function(e,n){var r=n.prototype;t.widget(r.namespace+"."+r.widgetName,u,n._proto)}),delete i._childConstructors):n._childConstructors.push(u),t.widget.bridge(e,u),u},t.widget.extend=function(e){for(var r,o,i=n.call(arguments,1),u=0,a=i.length;a>u;u++)for(r in i[u])o=i[u][r],i[u].hasOwnProperty(r)&&void 0!==o&&(e[r]=t.isPlainObject(o)?t.isPlainObject(e[r])?t.widget.extend({},e[r],o):t.widget.extend({},o):o);return e},t.widget.bridge=function(e,r){var o=r.prototype.widgetFullName||e;t.fn[e]=function(i){var u="string"==typeof i,a=n.call(arguments,1),s=this;return u?this.each(function(){var n,r=t.data(this,o);return"instance"===i?(s=r,!1):r?t.isFunction(r[i])&&"_"!==i.charAt(0)?(n=r[i].apply(r,a))!==r&&void 0!==n?(s=n&&n.jquery?s.pushStack(n.get()):n,!1):void 0:t.error("no such method '"+i+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+i+"'")}):(a.length&&(i=t.widget.extend.apply(null,[i].concat(a))),this.each(function(){var e=t.data(this,o);e?(e.option(i||{}),e._init&&e._init()):t.data(this,o,new r(i,this))})),s}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(n,r){r=t(r||this.defaultElement||this)[0],this.element=t(r),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),r!==this&&(t.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===r&&this.destroy()}}),this.document=t(r.style?r.ownerDocument:r.document||r),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var r,o,i,u=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(u={},r=e.split("."),e=r.shift(),r.length){for(o=u[e]=t.widget.extend({},this.options[e]),i=0;r.length-1>i;i++)o[r[i]]=o[r[i]]||{},o=o[r[i]];if(e=r.pop(),1===arguments.length)return void 0===o[e]?null:o[e];o[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];u[e]=n}return this._setOptions(u),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,n,r){var o,i=this;"boolean"!=typeof e&&(r=n,n=e,e=!1),r?(n=o=t(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,o=this.widget()),t.each(r,function(r,u){function a(){return e||!0!==i.options.disabled&&!t(this).hasClass("ui-state-disabled")?("string"==typeof u?i[u]:u).apply(i,arguments):void 0}"string"!=typeof u&&(a.guid=u.guid=u.guid||a.guid||t.guid++);var s=r.match(/^([\w:-]*)\s*(.*)$/),c=s[1]+i.eventNamespace,l=s[2];l?o.delegate(l,c,a):n.bind(c,a)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(n).undelegate(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var n=this;return setTimeout(function(){return("string"==typeof t?n[t]:t).apply(n,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,r){var o,i,u=this.options[e];if(r=r||{},(n=t.Event(n)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],i=n.originalEvent)for(o in i)o in n||(n[o]=i[o]);return this.element.trigger(n,r),!(t.isFunction(u)&&!1===u.apply(this.element[0],[n].concat(r))||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(r,o,i){"string"==typeof o&&(o={effect:o});var u,a=o?!0===o||"number"==typeof o?n:o.effect||n:e;"number"==typeof(o=o||{})&&(o={duration:o}),u=!t.isEmptyObject(o),o.complete=i,o.delay&&r.delay(o.delay),u&&t.effects&&t.effects.effect[a]?r[e](o):a!==e&&r[a]?r[a](o.duration,o.easing,i):r.queue(function(n){t(this)[e](),i&&i.call(r[0]),n()})}}),t.widget})?r.apply(e,o):r)||(t.exports=i)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createWebApiHub=e.DotNetifyHubWebApi=void 0;var r=n(0),o=function(){function t(t,e){this.url="",this.mode="webapi",this.debug=!1,this.isConnected=!1,this.isHubStarted=!1,this.responseEvent=r.createEventEmitter(),this.reconnectedEvent=r.createEventEmitter(),this.connectedEvent=r.createEventEmitter(),this.connectionFailedEvent=r.createEventEmitter(),this.reconnectDelay=[],this._vmArgs={},this.url=t||"",this.onRequest=e}return t.create=function(e,n){return new t(e,n)},t.prototype.init=function(){},t.prototype.stateChanged=function(){},t.prototype.startHub=function(){this.isConnected=!0,this.isHubStarted=!0,this.connectedEvent.emit()},t.prototype.requestVM=function(t,e){var n=this,o=e||{},i=o.$vmArg?"?vmarg="+JSON.stringify(o.$vmArg):"",u=o.$headers||{};this._vmArgs[t]=o;var a=this.url+"/api/dotnetify/vm/"+t+i;r.fetch("GET",a,null,function(t){Object.keys(u).forEach(function(e){return t.setRequestHeader(e,u[e])}),"function"==typeof n.onRequest&&n.onRequest(a,t)}).then(function(e){n.responseEvent.emit(t,e)}).catch(function(e){return console.error("["+t+"] Request failed",e)})},t.prototype.updateVM=function(t,e){var n=this,o=this._vmArgs[t]||{},i=o.$vmArg?"?vmarg="+JSON.stringify(o.$vmArg):"",u=o.$headers||{},a="object"==typeof e?JSON.stringify(e):e,s=this.url+"/api/dotnetify/vm/"+t+i;r.fetch("POST",s,a,function(t){t.setRequestHeader("Content-Type","application/json"),Object.keys(u).forEach(function(e){return t.setRequestHeader(e,u[e])}),"function"==typeof n.onRequest&&n.onRequest(s,t,a)}).then(function(e){n.responseEvent.emit(t,e)}).catch(function(e){return console.error("["+t+"] Update failed",e)})},t.prototype.disposeVM=function(t){var e=this;delete this._vmArgs[t];var n=this.url+"/api/dotnetify/vm/"+t;r.fetch("DELETE",n,null,function(t){"function"==typeof e.onRequest&&e.onRequest(n,t)}).catch(function(e){return console.error("["+t+"] Dispose failed",e)})},t}();e.DotNetifyHubWebApi=o;var i=o.create;e.createWebApiHub=i,e.default=o.create()},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.hasLocalVM=e.DotNetifyHubLocal=void 0;var r=n(0),o=window||t||{},i=function(t){return t&&t.replace(/\./g,"_")};e.hasLocalVM=function(t){var e=i(t),n=o[e];return"object"==typeof n&&"function"==typeof n.onConnect};var u=function(){function t(){this.url=null,this.mode="local",this.debug=!1,this.isConnected=!1,this.isHubStarted=!1,this.responseEvent=r.createEventEmitter(),this.reconnectedEvent=r.createEventEmitter(),this.connectedEvent=r.createEventEmitter(),this.connectionFailedEvent=r.createEventEmitter(),this.reconnectDelay=[]}return t.prototype.init=function(){},t.prototype.stateChanged=function(){},t.prototype.startHub=function(){this.isConnected=!0,this.isHubStarted=!0,this.connectedEvent.emit()},t.prototype.requestVM=function(t,e){var n=this,r=i(t),u=o[r];"object"==typeof u&&"function"==typeof u.onConnect&&(this.debug&&console.log("["+t+"] *** local mode ***"),u.$pushUpdate=function(e){"object"==typeof e&&(e=JSON.stringify(e)),setTimeout(function(){return n.responseEvent.emit(t,e)})},u.$pushUpdate(u.onConnect(e)||{}))},t.prototype.updateVM=function(t,e){var n=this,r=i(t),u=o[r];if("object"==typeof u&&"function"==typeof u.onDispatch){var a=u.onDispatch(e);a&&("object"==typeof a&&(a=JSON.stringify(a)),setTimeout(function(){return n.responseEvent.emit(t,a)}))}},t.prototype.disposeVM=function(t){var e=i(t),n=o[e];"object"==typeof n&&"function"==typeof n.onDestroy&&n.onDestroy(t)},t}();e.DotNetifyHubLocal=u,e.default=new u}).call(this,n(1))},function(t,e){t.exports=n},function(t,e){var n=t.exports={type:function(t){return null==t?String(t):o[r.call(t)]||"object"},isArray:function(t){return"array"===n.type(t)},isFunction:i,isPlainObject:function(t){if(!t||"object"!==n.type(t))return!1;return!0},each:function(t,e,n){var r,o=0,u=t.length,a=void 0===u||i(t);if(n)if(a){for(r in t)if(!1===e.apply(t[r],n))break}else for(;o<u&&!1!==e.apply(t[o++],n););else if(a){for(r in t)if(!1===e.call(t[r],r,t[r]))break}else for(;o<u&&!1!==e.call(t[o],o,t[o++]););return t},extend:function(){var t,e,r,o,i,u,a=arguments[0]||{},s=1,c=arguments.length,l=!1;"boolean"==typeof a&&(l=a,a=arguments[1]||{},s=2);"object"==typeof a||n.isFunction(a)||(a={});c===s&&(a=this,--s);for(;s<c;s++)if(null!=(t=arguments[s]))for(e in t)r=a[e],o=t[e],a!==o&&(l&&o&&(n.isPlainObject(o)||(i=n.isArray(o)))?(i?(i=!1,u=r&&n.isArray(r)?r:[]):u=r&&n.isPlainObject(r)?r:{},a[e]=n.extend(l,u,o)):void 0!==o&&(a[e]=o));return a},noop:function(){}},r=Object.prototype.toString,o={};function i(t){return"function"===n.type(t)}"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(function(t){o["[object "+t+"]"]=t.toLowerCase()})},function(t,e,n){var r=t.exports=n(17),o=/\s+/,i={};r.Callbacks=function(t){var e,n,u,a,s,c,l=[],f=!(t="string"==typeof t?i[t]||function(t){var e=i[t]={};return r.each(t.split(o),function(t,n){e[n]=!0}),e}(t):r.extend({},t)).once&&[],d=function(r){for(e=t.memory&&r,n=!0,c=a||0,a=0,s=l.length,u=!0;l&&c<s;c++)if(!1===l[c].apply(r[0],r[1])&&t.stopOnFalse){e=!1;break}u=!1,l&&(f?f.length&&d(f.shift()):e?l=[]:p.disable())},p={add:function(){if(l){var n=l.length;!function e(n){r.each(n,function(n,o){var i=r.type(o);"function"===i?t.unique&&p.has(o)||l.push(o):o&&o.length&&"string"!==i&&e(o)})}(arguments),u?s=l.length:e&&(a=n,d(e))}return this},remove:function(){return l&&r.each(arguments,function(t,e){for(var n;(n=r.inArray(e,l,n))>-1;)l.splice(n,1),u&&(n<=s&&s--,n<=c&&c--)}),this},has:function(t){return r.inArray(t,l)>-1},empty:function(){return l=[],this},disable:function(){return l=f=e=void 0,this},disabled:function(){return!l},lock:function(){return f=void 0,e||p.disable(),this},locked:function(){return!f},fireWith:function(t,e){return e=[t,(e=e||[]).slice?e.slice():e],!l||n&&!f||(u?f.push(e):d(e)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!n}};return p}},function(t,e,n){
/*!
* jquery-deferred
* Copyright(c) 2011 Hidden <zzdhidden@gmail.com>
* MIT Licensed
*/
var r=t.exports=n(18),o=Array.prototype.slice;r.extend({Deferred:function(t){var e=[["resolve","done",r.Callbacks("once memory"),"resolved"],["reject","fail",r.Callbacks("once memory"),"rejected"],["notify","progress",r.Callbacks("memory")]],n="pending",o={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var t=arguments;return r.Deferred(function(n){r.each(e,function(e,o){var u=o[0],a=t[e];i[o[1]](r.isFunction(a)?function(){var t=a.apply(this,arguments);t&&r.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[u+"With"](this===i?n:this,[t])}:n[u])}),t=null}).promise()},promise:function(t){return null!=t?r.extend(t,o):o}},i={};return o.pipe=o.then,r.each(e,function(t,r){var u=r[2],a=r[3];o[r[1]]=u.add,a&&u.add(function(){n=a},e[1^t][2].disable,e[2][2].lock),i[r[0]]=u.fire,i[r[0]+"With"]=u.fireWith}),o.promise(i),t&&t.call(i,i),i},when:function(t){var e,n,i,u=0,a=o.call(arguments),s=a.length,c=1!==s||t&&r.isFunction(t.promise)?s:0,l=1===c?t:r.Deferred(),f=function(t,n,r){return function(i){n[t]=this,r[t]=arguments.length>1?o.call(arguments):i,r===e?l.notifyWith(n,r):--c||l.resolveWith(n,r)}};if(s>1)for(e=new Array(s),n=new Array(s),i=new Array(s);u<s;u++)a[u]&&r.isFunction(a[u].promise)?a[u].promise().done(f(u,i,a)).fail(l.reject).progress(f(u,n,e)):--c;return c||l.resolveWith(i,a),l.promise()}})},function(t,e,n){t.exports=n(19)},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.dotnetifyHubFactory=void 0;var r=n(0),o=n(5),i=n(16),u=o,a=window||t||{},s=function(){function t(){}return t.create=function(){var t={version:"2.0.0",type:null,reconnectDelay:[2,5,10],reconnectRetry:null,_startInfo:null,_init:!1,requestVM:function(e,n){return t.server.request_VM(e,n)},updateVM:function(e,n){return t.server.update_VM(e,n)},disposeVM:function(e){return t.server.dispose_VM(e)},responseEvent:r.createEventEmitter(),reconnectedEvent:r.createEventEmitter(),connectedEvent:r.createEventEmitter(),connectionFailedEvent:r.createEventEmitter(),get isHubStarted(){return!!this._startInfo},startHub:function(t,e,n,r){var o=this,i=function(){"function"==typeof e&&e(),o.connectedEvent.emit()};if(null===this._startInfo||r)try{this._startInfo=this.start(t).done(i).fail(function(t){throw"function"==typeof n&&n(),o.connectionFailedEvent.emit(),t})}catch(t){this._startInfo=null}else try{this._startInfo.done(i)}catch(o){return this._startInfo=null,this.startHub(t,e,n,r)}},init:function(e,n,r){t._init||(t._init=!0,(r=r||a.signalR||i)&&r.HubConnection?(t.type="netcore",Object.defineProperty(t,"isConnected",{get:function(){return t._connection&&1===t._connection.connection.connectionState}}),t=u.extend(t,{hubPath:e||"/dotnetify",url:n,_connection:null,_reconnectCount:0,_startDoneHandler:null,_startFailHandler:null,_disconnectedHandler:function(){},_stateChangedHandler:function(t){},_onDisconnected:function(){t._changeState(4),t._disconnectedHandler()},_changeState:function(e){1==e&&(t._reconnectCount=0);t._stateChangedHandler({0:"connecting",1:"connected",2:"reconnecting",4:"disconnected",99:"terminated"}[e])},_startConnection:function(e,n){var o=t.url?t.url+t.hubPath:t.hubPath,i={};Object.keys(e).forEach(function(t){i[t]=e[t]}),i.transport=n.shift();var u=(new r.HubConnectionBuilder).withUrl(o,i);"function"==typeof i.connectionBuilder&&(u=i.connectionBuilder(u)),t._connection=u.build(),t._connection.on("response_vm",t.client.response_VM),t._connection.onclose(t._onDisconnected);var a=t._connection.start().then(function(){t._changeState(1)}).catch(function(){n.length>0?t._startConnection(e,n):t._onDisconnected()});return"function"==typeof t._startDoneHandler&&a.then(t._startDoneHandler).catch(t._startFailHandler||function(){}),a},start:function(e){t._startDoneHandler=null,t._startFailHandler=null;var n=[0],r={webSockets:0,serverSentEvents:1,longPolling:2};e&&Array.isArray(e.transport)&&(n=e.transport.map(function(t){return r[t]}));var o=t._startConnection(e,n);return{done:function(e){return t._startDoneHandler=e,o.then(e).catch(function(t){throw t}),this},fail:function(e){return t._startFailHandler=e,o.catch(e),this}}},disconnected:function(e){"function"==typeof e&&(t._disconnectedHandler=e)},stateChanged:function(e){"function"==typeof e&&(t._stateChangedHandler=e)},reconnect:function(e){if("function"==typeof e)if(!t.reconnectRetry||t._reconnectCount<t.reconnectRetry){var n=t._reconnectCount<t.reconnectDelay.length?t.reconnectDelay[t._reconnectCount]:t.reconnectDelay[t.reconnectDelay.length-1];t._reconnectCount++,setTimeout(function(){t._changeState(2),e()},1e3*n)}else t._changeState(99)},client:{},server:{dispose_VM:function(e){t._connection.invoke("Dispose_VM",e)},update_VM:function(e,n){t._connection.invoke("Update_VM",e,n)},request_VM:function(e,n){t._connection.invoke("Request_VM",e,n)}}})):(t.type="netfx",a.jQuery&&(u=a.jQuery),function(e){if("function"!=typeof e.signalR)throw new Error("SignalR: SignalR is not loaded. Please ensure jquery.signalR-x.js is referenced before ~/signalr/js.");var n=e.signalR;function r(t,n){return function(){n.apply(t,e.makeArray(arguments))}}function o(t,n){var o,i,u,a,s;for(o in t)if(t.hasOwnProperty(o)){if(!(i=t[o]).hubName)continue;for(u in s=n?i.on:i.off,i.client)if(i.client.hasOwnProperty(u)){if(a=i.client[u],!e.isFunction(a))continue;s.call(i,u,r(i,a))}}}e.hubConnection.prototype.createHubProxies=function(){var t={};return this.starting(function(){o(t,!0),this._registerSubscribedHubs()}).disconnected(function(){o(t,!1)}),t.dotNetifyHub=this.createHubProxy("dotNetifyHub"),t.dotNetifyHub.client={},t.dotNetifyHub.server={dispose_VM:function(n){return t.dotNetifyHub.invoke.apply(t.dotNetifyHub,e.merge(["Dispose_VM"],e.makeArray(arguments)))},request_VM:function(n,r){return t.dotNetifyHub.invoke.apply(t.dotNetifyHub,e.merge(["Request_VM"],e.makeArray(arguments)))},update_VM:function(n,r){return t.dotNetifyHub.invoke.apply(t.dotNetifyHub,e.merge(["Update_VM"],e.makeArray(arguments)))}},t},n.hub=e.hubConnection(t.hubPath,{useDefaultPath:!1}),e.extend(n,n.hub.createHubProxies())}(u),Object.defineProperty(t,"state",{get:function(){return u.connection.hub.state},set:function(t){u.connection.hub.state=t}}),Object.defineProperty(t,"client",{get:function(){return u.connection.dotNetifyHub.client}}),Object.defineProperty(t,"server",{get:function(){return u.connection.dotNetifyHub.server}}),Object.defineProperty(t,"isConnected",{get:function(){return u.connection.hub.state==u.signalR.connectionState.connected}}),t=u.extend(t,{hubPath:e||"/signalr",url:n,_reconnectCount:0,_stateChangedHandler:function(t){},start:function(e){var n;return t.url&&(u.connection.hub.url=t.url),(n=e?u.connection.hub.start(e):u.connection.hub.start()).fail(function(t){t.source&&"Error parsing negotiate response."===t.source.message&&console.warn("This client may be attempting to connect to an incompatible SignalR .NET Core server.")}),n},disconnected:function(t){return u.connection.hub.disconnected(t)},stateChanged:function(e){return t._stateChangedHandler=e,u.connection.hub.stateChanged(function(n){1==n&&(t._reconnectCount=0);e({0:"connecting",1:"connected",2:"reconnecting",4:"disconnected"}[n.newState])})},reconnect:function(e){if("function"==typeof e)if(!t.reconnectRetry||t._reconnectCount<t.reconnectRetry){var n=t._reconnectCount<t.reconnectDelay.length?t.reconnectDelay[t._reconnectCount]:t.reconnectDelay[t.reconnectDelay.length-1];t._reconnectCount++,setTimeout(function(){t._stateChangedHandler("reconnecting"),e()},1e3*n)}else t._stateChangedHandler("terminated")}})),t.client.response_VM=function(e,n){Array.isArray(e)&&(n=e[1],e=e[0]),t.responseEvent.emit(e,n)||t.server.dispose_VM(e)},t.disconnected(function(){t._startInfo=null,t.reconnect(function(){t.reconnectedEvent.emit()})}))}};return t},t}();e.dotnetifyHubFactory=s,e.default=s.create()}).call(this,n(1))},function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],u=0,a=i.length;u<a;u++,o++)r[o]=i[u];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.Dotnetify=void 0;var o=n(21),i=n(15),u=n(14),a=function(){function t(){this.react=null,this.vue=null,this.ko=null,this.hub=o.default,this.hubOptions={transport:["webSockets","longPolling"],connectionBuilder:function(t){return t}},this.hubPath=null,this.hubLib=null,this.debug=!1,this.debugFn=null,this.connectionStateHandler=null,this.connectHandler=null,this._vmAccessors=[]}return Object.defineProperty(t.prototype,"hubServerUrl",{get:function(){return this.hub.url},set:function(t){this.hub.url=t,this.debug&&console.log("SignalR: connecting to "+this.hubServerUrl),this.hub.isHubStarted&&this.startHub(this.hub,!0)},enumerable:!1,configurable:!0}),t.prototype.connect=function(t,e){return s.react.connect(t,{},e)},t.prototype.createHub=function(t,e,n){return this.initHub(o.dotnetifyHubFactory.create(),e,t,n)},t.prototype.createWebApiHub=function(t,e){return u.createWebApiHub(t,e)},t.prototype.initHub=function(t,e,n,r){var o=this,i=t||this.hub,u=e||this.hubPath,a=n||this.hubServerUrl,s=r||this.hubLib;return i.isHubStarted||(i.init(u,a,s),i.stateChanged(function(t){return o.handleConnectionStateChanged(t,null,i)})),i},t.prototype.selectHub=function(t){(t=t||{}).options=t.options||{};var e="function"==typeof this.connectHandler&&this.connectHandler(t)||{};return e.hub||(e.hub=i.hasLocalVM(t.vmId)?i.default:t.options.webApi?u.default:this.initHub(),e.hub.debug=this.debug),Object.assign(t,e)},t.prototype.startHub=function(t,e){var n=this,r=t||this.hub;r.startHub(this.hubOptions,function(){},function(t){return n.handleConnectionStateChanged("error",t,r)},e)},t.prototype.addVMAccessor=function(t){!this._vmAccessors.includes(t)&&this._vmAccessors.push(t)},t.prototype.getViewModels=function(){return this._vmAccessors.reduce(function(t,e){return r(t,e())},[]).filter(function(t,e,n){return n.indexOf(t)===e})},t.prototype.handleConnectionStateChanged=function(t,e,n){this.debug&&console.log("SignalR: "+(e?e.message:t)),"function"==typeof this.connectionStateHandler?this.connectionStateHandler(t,e,n):e&&console.error(e)},t.prototype.checkServerSideException=function(t,e,n){var r=JSON.parse(e);if(r&&r.hasOwnProperty("ExceptionType")&&r.hasOwnProperty("Message")){var o={name:r.ExceptionType,message:r.Message};if("function"!=typeof n)throw console.error("["+t+"] "+o.name+": "+o.message),o;n(o)}},t}();e.Dotnetify=a;var s=new a;e.default=s},function(t,e,n){"use strict";var r=function(t){return t&&t.__esModule?t:{default:t}}(n(6));n(11),t.exports=r.default}])});